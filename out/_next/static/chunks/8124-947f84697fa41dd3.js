"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8124],{28124:function(e,t,r){r.d(t,{B:function(){return k}});var n=r(98949),a=r(61994),i=r(43654),l=r(86757),o=r.n(l),s=r(99676),d=r.n(s),u=r(9841),h=r(40946),c=r(90249),v=r(16630),f=r(97780),p=r(82944);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(){return(y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach(function(t){X(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,M(n.key),n)}}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(b=function(){return!!e})()}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function X(e,t,r){return(t=M(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=g(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:t+""}var O=function(e){var t=e.data,r=e.startIndex,n=e.endIndex,a=e.x,l=e.width,o=e.travellerWidth;if(!t||!t.length)return{};var s=t.length,u=(0,i.x)().domain(d()(0,s)).range([a,a+l-o]),h=u.domain().map(function(e){return u(e)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(n),scale:u,scaleValues:h}},E=function(e){return e.changedTouches&&!!e.changedTouches.length},k=function(e){var t,r;function i(e){var t,r,n;return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),r=i,n=[e],r=S(r),X(t=function(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,b()?Reflect.construct(r,n||[],S(this).constructor):r.apply(this,n)),"handleDrag",function(e){t.leaveTimer&&(clearTimeout(t.leaveTimer),t.leaveTimer=null),t.state.isTravellerMoving?t.handleTravellerMove(e):t.state.isSlideMoving&&t.handleSlideDrag(e)}),X(t,"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&t.handleDrag(e.changedTouches[0])}),X(t,"handleDragEnd",function(){t.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var e=t.props,r=e.endIndex,n=e.onDragEnd,a=e.startIndex;null==n||n({endIndex:r,startIndex:a})}),t.detachDragEndListener()}),X(t,"handleLeaveWrapper",function(){(t.state.isTravellerMoving||t.state.isSlideMoving)&&(t.leaveTimer=window.setTimeout(t.handleDragEnd,t.props.leaveTimeOut))}),X(t,"handleEnterSlideOrTraveller",function(){t.setState({isTextActive:!0})}),X(t,"handleLeaveSlideOrTraveller",function(){t.setState({isTextActive:!1})}),X(t,"handleSlideDragStart",function(e){var r=E(e)?e.changedTouches[0]:e;t.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:r.pageX}),t.attachDragEndListener()}),t.travellerDragStartHandlers={startX:t.handleTravellerDragStart.bind(t,"startX"),endX:t.handleTravellerDragStart.bind(t,"endX")},t.state={},t}return!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(i,e),t=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(e){var t=e.startX,r=e.endX,n=this.state.scaleValues,a=this.props,l=a.gap,o=a.data.length-1,s=i.getIndexInRange(n,Math.min(t,r)),d=i.getIndexInRange(n,Math.max(t,r));return{startIndex:s-s%l,endIndex:d===o?o:d-d%l}}},{key:"getTextOfTick",value:function(e){var t=this.props,r=t.data,n=t.tickFormatter,a=t.dataKey,i=(0,c.F$)(r[e],a,e);return o()(n)?n(i,e):i}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,r=t.slideMoveStartX,n=t.startX,a=t.endX,i=this.props,l=i.x,o=i.width,s=i.travellerWidth,d=i.startIndex,u=i.endIndex,h=i.onChange,c=e.pageX-r;c>0?c=Math.min(c,l+o-s-a,l+o-s-n):c<0&&(c=Math.max(c,l-n,l-a));var v=this.getIndex({startX:n+c,endX:a+c});(v.startIndex!==d||v.endIndex!==u)&&h&&h(v),this.setState({startX:n+c,endX:a+c,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var r=E(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:r.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t=this.state,r=t.brushMoveStartX,n=t.movingTravellerId,a=t.endX,i=t.startX,l=this.state[n],o=this.props,s=o.x,d=o.width,u=o.travellerWidth,h=o.onChange,c=o.gap,v=o.data,f={startX:this.state.startX,endX:this.state.endX},p=e.pageX-r;p>0?p=Math.min(p,s+d-u-l):p<0&&(p=Math.max(p,s-l)),f[n]=l+p;var g=this.getIndex(f),y=g.startIndex,m=g.endIndex,x=function(){var e=v.length-1;return"startX"===n&&(a>i?y%c==0:m%c==0)||a<i&&m===e||"endX"===n&&(a>i?m%c==0:y%c==0)||a>i&&m===e};this.setState(X(X({},n,l+p),"brushMoveStartX",e.pageX),function(){h&&x()&&h(g)})}},{key:"handleTravellerMoveKeyboard",value:function(e,t){var r=this,n=this.state,a=n.scaleValues,i=n.startX,l=n.endX,o=this.state[t],s=a.indexOf(o);if(-1!==s){var d=s+e;if(-1!==d&&!(d>=a.length)){var u=a[d];"startX"===t&&u>=l||"endX"===t&&u<=i||this.setState(X({},t,u),function(){r.props.onChange(r.getIndex({startX:r.state.startX,endX:r.state.endX}))})}}}},{key:"renderBackground",value:function(){var e=this.props,t=e.x,r=e.y,a=e.width,i=e.height,l=e.fill,o=e.stroke;return n.default.createElement("rect",{stroke:o,fill:l,x:t,y:r,width:a,height:i})}},{key:"renderPanorama",value:function(){var e=this.props,t=e.x,r=e.y,a=e.width,i=e.height,l=e.data,o=e.children,s=e.padding,d=n.Children.only(o);return d?n.default.cloneElement(d,{x:t,y:r,width:a,height:i,margin:s,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(e,t){var r,a,l=this,o=this.props,s=o.y,d=o.travellerWidth,h=o.height,c=o.traveller,v=o.ariaLabel,f=o.data,g=o.startIndex,y=o.endIndex,m=Math.max(e,this.props.x),T=x(x({},(0,p.L6)(this.props,!1)),{},{x:m,y:s,width:d,height:h}),b=v||"Min value: ".concat(null===(r=f[g])||void 0===r?void 0:r.name,", Max value: ").concat(null===(a=f[y])||void 0===a?void 0:a.name);return n.default.createElement(u.m,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":e,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[t],onTouchStart:this.travellerDragStartHandlers[t],onKeyDown:function(e){["ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),l.handleTravellerMoveKeyboard("ArrowRight"===e.key?1:-1,t))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},i.renderTraveller(c,T))}},{key:"renderSlide",value:function(e,t){var r=this.props,a=r.y,i=r.height,l=r.stroke,o=r.travellerWidth;return n.default.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:Math.min(e,t)+o,y:a,width:Math.max(Math.abs(t-e)-o,0),height:i})}},{key:"renderText",value:function(){var e=this.props,t=e.startIndex,r=e.endIndex,a=e.y,i=e.height,l=e.travellerWidth,o=e.stroke,s=this.state,d=s.startX,c=s.endX,v={pointerEvents:"none",fill:o};return n.default.createElement(u.m,{className:"recharts-brush-texts"},n.default.createElement(h.x,y({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,c)-5,y:a+i/2},v),this.getTextOfTick(t)),n.default.createElement(h.x,y({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,c)+l+5,y:a+i/2},v),this.getTextOfTick(r)))}},{key:"render",value:function(){var e=this.props,t=e.data,r=e.className,i=e.children,l=e.x,o=e.y,s=e.width,d=e.height,h=e.alwaysShowText,c=this.state,p=c.startX,g=c.endX,y=c.isTextActive,m=c.isSlideMoving,x=c.isTravellerMoving,T=c.isTravellerFocused;if(!t||!t.length||!(0,v.hj)(l)||!(0,v.hj)(o)||!(0,v.hj)(s)||!(0,v.hj)(d)||s<=0||d<=0)return null;var b=(0,a.Z)("recharts-brush",r),S=1===n.default.Children.count(i),w=(0,f.g)("userSelect","none");return n.default.createElement(u.m,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(p,g),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(g,"endX"),(y||m||x||T||h)&&this.renderText())}}],r=[{key:"renderDefaultTraveller",value:function(e){var t=e.x,r=e.y,a=e.width,i=e.height,l=e.stroke,o=Math.floor(r+i/2)-1;return n.default.createElement(n.default.Fragment,null,n.default.createElement("rect",{x:t,y:r,width:a,height:i,fill:l,stroke:"none"}),n.default.createElement("line",{x1:t+1,y1:o,x2:t+a-1,y2:o,fill:"none",stroke:"#fff"}),n.default.createElement("line",{x1:t+1,y1:o+2,x2:t+a-1,y2:o+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(e,t){return n.default.isValidElement(e)?n.default.cloneElement(e,t):o()(e)?e(t):i.renderDefaultTraveller(t)}},{key:"getDerivedStateFromProps",value:function(e,t){var r=e.data,n=e.width,a=e.x,i=e.travellerWidth,l=e.updateId,o=e.startIndex,s=e.endIndex;if(r!==t.prevData||l!==t.prevUpdateId)return x({prevData:r,prevTravellerWidth:i,prevUpdateId:l,prevX:a,prevWidth:n},r&&r.length?O({data:r,width:n,x:a,travellerWidth:i,startIndex:o,endIndex:s}):{scale:null,scaleValues:null});if(t.scale&&(n!==t.prevWidth||a!==t.prevX||i!==t.prevTravellerWidth)){t.scale.range([a,a+n-i]);var d=t.scale.domain().map(function(e){return t.scale(e)});return{prevData:r,prevTravellerWidth:i,prevUpdateId:l,prevX:a,prevWidth:n,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:d}}return null}},{key:"getIndexInRange",value:function(e,t){for(var r=e.length,n=0,a=r-1;a-n>1;){var i=Math.floor((n+a)/2);e[i]>t?a=i:n=i}return t>=e[a]?a:n}}],t&&T(i.prototype,t),r&&T(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(n.PureComponent);X(k,"displayName","Brush"),X(k,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1})}}]);